# Prometheus configuration for MEZ Stack (Rust binary architecture)
#
# Scrapes metrics from the single mez-api Axum server at /metrics.
# The previous 9-service scrape config is no longer needed — all five
# primitive APIs, corridor operations, compliance tensor, and regulator
# console are served by the unified mez-api binary.

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

alerting:
  alertmanagers: []

rule_files: []

scrape_configs:
  # mez-api — unified Axum server exposing all endpoints
  # Exports per-route latency histograms, request counters, and
  # domain-specific metrics (corridor state, tensor snapshots, etc.)
  - job_name: 'mez-api'
    static_configs:
      - targets: ['mez-api:8080']
    metrics_path: '/metrics'
    scrape_interval: 15s

  # PostgreSQL metrics (requires postgres_exporter sidecar if deployed)
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres:9187']
    metrics_path: '/metrics'

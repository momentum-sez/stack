# v0.4.27 — Artifact graph verify from witness bundles

This patch introduces **direct verification from witness bundles** and a **canonical schema** for the bundle manifest.

## Added

### `mez artifact graph verify --from-bundle <zip>`

You can now verify an artifact closure graph *without* manually extracting a bundle:

```bash
python -m tools.mez artifact graph verify --from-bundle /tmp/mez-witness.zip --strict --json
```

Behavior:

- The command extracts the bundle to a temp directory.
- The extracted `artifacts/` directory is used as an **offline CAS store root**.
- If you do **not** provide a root (`<type> <digest>` or `--path`), the command infers the root from the bundle’s `manifest.json`.
- Optional `--strict` recomputes digests from the on-disk bytes to detect tampered bundles.

### Canonical schema for `manifest.json`

New schema:

- `schemas/artifact.graph-verify-report.schema.json`

This validates the `MEZArtifactGraphVerifyReport` format produced by `mez artifact graph verify` and embedded as `manifest.json` in witness bundles.

In `--from-bundle` mode, the manifest is schema-validated **best-effort** before use.

## Version

- Stack spec version bumped to **0.4.27**.

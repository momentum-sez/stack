# v0.4.32 — Smart Asset Module Directories + Init CLI

This patch turns the Smart Asset receipt-chain primitives into a more operator-friendly, **portable** module layout and adds a scaffolding command.

## What changed

### New: `modules/smart-assets/_template/` (asset module template)

Adds a reference template for Smart Asset operator modules:

- `asset.yaml` — operational manifest (purposes, trust anchors, replication targets, pinned transition registry lock/digest)
- `trust-anchors.yaml` — authorized receipt / checkpoint signers
- `key-rotation.yaml` — optional key rotation policy placeholder
- `state/receipts/`, `state/checkpoints/`, `state/proofs/` — conventional locations for receipts, MMR checkpoints, and inclusion proofs

### New: CLI `mez asset module init <asset_id>`

Scaffolds `modules/smart-assets/<asset_id>/` from the template, rendering placeholders:

- `ASSET_ID`
- `STACK_SPEC_VERSION`
- `CREATED_AT`
- optional `PURPOSES` (repeatable `--purpose`)
- optional transition type registry pinning (`--transition-types-lock`, `--expected-transition-type-registry-digest`)

### Improved: module-aware asset receipt-chain commands

All `mez asset state *` commands now accept an **optional positional** `<path>` (asset module directory or `asset.yaml`). When provided:

- `--asset-id` becomes optional (derived from `asset.yaml`)
- `--receipts` becomes optional for commands that need it (derived from `asset.yaml.state.receipts_dir`)
- default outputs are written inside the module's `state/*` folders
- `--enforce-trust-anchors` can use `asset.yaml.trust_anchors_path` if `--trust-anchors` is omitted
- `--enforce-transition-types` can use module-pinned expectations (digest or lock)

### Version bump

- `STACK_SPEC_VERSION` bumped to **0.4.32**.
- Profile `stack_spec_version` fields + the starter `jurisdictions/_starter/stack.lock` were updated accordingly.

## Usage

```bash
# Scaffold a portable operator directory for a specific asset_id:
mez asset module init <asset_id>

# Run state-channel commands against the module directory:
mez asset state receipt-init modules/smart-assets/<asset_id> --sequence 0 --prev-root genesis --sign --key jwk.json
mez asset state verify modules/smart-assets/<asset_id>
mez asset state checkpoint modules/smart-assets/<asset_id> --sign --key jwk.json
```

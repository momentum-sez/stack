# v0.4.38 Patchlist

This patch focuses on **cross-corridor settlement anchoring** and **proof binding**.

It adds a compact, portable way to bind:

- an *obligation corridor* (e.g., trade) checkpoint/receipt,
- a *settlement corridor* (e.g., stablecoin or bank rail) checkpoint/receipt,
- and one or more external proof artifacts (SWIFT messages, bank confirmations, chain receipts, audit evidence, ZK proofs, etc.).

## New schemas

- `schemas/corridor.checkpoint.attachment.schema.json`
  - Typed ArtifactRef wrapper for corridor checkpoints (`artifact_type=checkpoint`), intended for inter-corridor anchoring.
- `schemas/proof-binding.schema.json`
  - Structured object that binds a proof artifact to one or more commitment digests.
- `schemas/proof-binding.attachment.schema.json`
  - Typed ArtifactRef wrapper for proof bindings (`artifact_type=proof-binding`).
- `schemas/corridor.settlement-anchor.schema.json`
  - Structured cross-corridor settlement anchor.
- `schemas/corridor.settlement-anchor.attachment.schema.json`
  - Typed ArtifactRef wrapper for settlement anchors (`artifact_type=settlement-anchor`).

## CLI additions

### Proof bindings

- `msez proof-binding init`
  - Create a `MSEZProofBinding` object, compute semantic digest (proof excluded), and optionally store in the generic artifact CAS.
- `msez proof-binding verify`
  - Validate schema + recompute digest; optionally verify Ed25519 proofs.

### Settlement anchors

- `msez corridor settlement-anchor-init`
  - Create a `MSEZCrossCorridorSettlementAnchor` artifact binding an obligation corridor checkpoint to a settlement corridor checkpoint.
  - Optionally include proof-bindings and/or raw proof blobs as ArtifactRefs.
  - Optionally store in the artifact CAS.
- `msez corridor settlement-anchor-verify`
  - Validate schema + recompute digest; optionally verify Ed25519 proofs and best-effort check embedded ArtifactRef uris.

### Corridor receipts

`msez corridor state receipt-init` now supports additional typed attachments:

- `--attach-corridor-checkpoint <checkpoint.json>`
- `--attach-proof-binding <proof-binding.json>`
- `--attach-settlement-anchor <settlement-anchor.json>`

## Artifact digest semantics

Strict artifact graph verification now supports semantic digests for:

- `artifact_type=proof-binding` (`sha256(signing_input(binding))`)
- `artifact_type=settlement-anchor` (`sha256(signing_input(anchor))`)

## Spec updates

- `spec/40-corridors.md` includes a new section: **Cross-corridor settlement anchoring (v0.4.38)**.

## Version bump

- Stack spec version bump: **0.4.36 â†’ 0.4.38**

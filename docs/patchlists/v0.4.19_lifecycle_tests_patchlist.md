# MSEZ Stack v0.4.19 Patchlist — Lifecycle Policy + Fork Tests

This patch introduces **corridor lifecycle evidence gating** and closes correctness gaps in receipt verification around **ArtifactRef-aware digest sets** and **ProofResult-aware signature verification**.

## Added

- `governance/corridor.lifecycle.state-machine.v1.json`
  - Default lifecycle states: `PROPOSED → OPERATIONAL → HALTED → OPERATIONAL → DEPRECATED`.
  - Evidence-gated transitions:
    - `OPERATIONAL → HALTED` requires `MSEZCorridorForkAlarmCredential`.
    - `HALTED → OPERATIONAL` requires `MSEZCorridorForkResolutionCredential`.

- `tools/lifecycle.py`
  - `apply_lifecycle_transition(...)` reference function.
  - ArtifactRef-friendly evidence resolution (`artifact_type=vc`, `digest_sha256`, optional `uri`).

- Unit tests
  - `tests/test_lifecycle_state_machine.py`
  - `tests/test_fork_resolution.py`

## Changed

- `schemas/corridor.state-machine.schema.json`
  - Adds `requires_evidence_vc_types[]` on transition rules.

- `schemas/vc.corridor-lifecycle-transition.schema.json`
  - Adds `credentialSubject.evidence[]` as `ArtifactRef`.

## Fixed

- `tools/msez.py`
  - Digest set checks (`lawpack_digest_set`, `ruleset_digest_set`) now accept either raw digests or `ArtifactRef` objects.
  - `--require-artifacts` now correctly resolves ArtifactRef digests for digest-set entries and transition-type registry digests.
  - Signature verification now properly interprets `verify_credential(...)` results (list of `ProofResult`).


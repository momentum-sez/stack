# v0.4.15 — High-leverage integrity upgrades (patchlist)

This patchlist captures the concrete code/spec deltas implementing the “next highest-leverage targets” after the v0.4.14 foundational upgrade.

## 1) Watcher attestations + fork alarms

### Added
- `schemas/vc.corridor-watcher-attestation.schema.json`
- `schemas/vc.corridor-fork-alarm.schema.json`
- CLI:
  - `msez corridor state watcher-attest`
  - `msez corridor state fork-alarm`
- Spec updates:
  - `spec/40-corridors.md` (watcher integrity section)

### Rationale
- Cheap, independent, publishable integrity signals.
- Enables fast fork detection without requiring every observer to replay the full receipt chain.

## 2) Lawpack availability attestations

### Added
- `schemas/vc.artifact-availability.schema.json`
- CLI:
  - `msez corridor availability-attest`
  - `msez corridor availability-verify`
- Spec updates:
  - `spec/96-lawpacks.md` (operational availability section)

### Rationale
- Operational resilience: multiple independent holders attest they can serve corridor lawpacks.

## 3) Checkpoint finality with policy

### Changed
- `schemas/vc.corridor-agreement.schema.json`: new `credentialSubject.state_channel.checkpointing` block.
- `tools/msez.py corridor state verify`:
  - `--from-checkpoint` (bootstrap verification)
  - `--checkpoint` + `--enforce-checkpoint-policy` (head checkpoint finality/quorum)
- `tools/mmr.py`: incremental MMR update helpers to append leaves from checkpoint peaks.

### Rationale
- Scalable verification: new verifiers can sync from a signed checkpoint and only verify receipts since.

## 4) Authority registry chaining

### Changed
- `schemas/vc.authority-registry.schema.json`:
  - added `parent_registry_ref` and `registry_level`.
- `schemas/corridor.schema.json`:
  - `authority_registry_vc_path` now supports a string or a list (ordered chain).
- `tools/msez.py`:
  - `load_authority_registry(...)` now supports chain validation (treaty → national → zone) and optional parent resolution.

### Rationale
- Hardens external signer authorization against “trust-anchor circularity” while supporting real-world delegation graphs.

## Misc

### Fixed
- Added missing `base_did(...)` helper to `tools/vc.py`.

### Versioning
- Stack spec bump: `0.4.14` → `0.4.15`.
- Updated starter/profile manifests to `stack_spec_version: 0.4.15`.
